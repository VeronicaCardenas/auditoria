{% extends '::fronted4.html.twig' %}
{% block title %}Modificar Ahorro{% endblock %}
{% block encabezado %}Modificar Ahorro{% endblock %}

{% block contenedor %}
    <script>
        $(function(){

            {% if entity.tipoAhorro!="Ahorro Plazo Fijo" %}
            $("#modulos_personasbundle_ahorro_fechafinal").attr("readonly",true);
            {% else %}
            $("#modulos_personasbundle_ahorro_fechafinal").attr("readonly",false);
            {% endif %}

            if("{{ entity.estadoAhorro}}" != "APROBADO" ) {
                $("#modulos_personasbundle_ahorro_tasaInteres").attr("readonly", true);
                $("#modulos_personasbundle_ahorro_persona").attr("disabled", true);
                $("#modulos_personasbundle_ahorro_id").attr("readonly", true);
                $("#modulos_personasbundle_ahorro_valorAhorrar").attr("readonly", true);
                $("#modulos_personasbundle_ahorro_estadoAhorro").attr("disabled", true);
                $("#modulos_personasbundle_ahorro_tipoAhorro").attr("disabled", true);
                $("#modulos_personasbundle_ahorro_fechaSolicitud").attr("readonly", true);
                $("#modulos_personasbundle_ahorro_fechafinal").attr("readonly", true);
            }

            //$("#modulos_personasbundle_ahorro_estadoAhorro").attr("disabled", true);
            $('.datetimepicker1').datetimepicker({
                //viewMode: 'years',

                //format: 'DD/MM/YYYY HH:mm',
                locale: 'es'
            });
            $("#modulos_personasbundle_ahorro_id").attr("readonly",true);



            $("#GestionarAhorros").addClass("active");
            $("#Ahorros").addClass("active");


            $(document).on("click","#carteraahorro",function(){
                $('#carteraahorro').attr("href","{{ path('persona_carteraahorro',{'parametro':''},{'id':''}) }}" + '/' + 2+ '/' + "{{ entity.persona.id }}");
            });

            var montominimo = 0;
            var montomaximo = 0;
            var valor = "{{ entity.tipoAhorro==null?"AHORRO INDIVIDUAL":entity.tipoAhorro.nombre }}";
            {% set flag = true  %}
            {% for tiposahorro in tiposahorros %}
                {% if  entity.tipoAhorro==null and flag %}
                    valor = "{{  tiposahorro.nombre }}";
                    {% set flag = false  %}
                 {% endif %}
            var objValor = "{{ tiposahorro.nombre }}";
            if(valor == objValor){
                {#$("#modulos_personasbundle_ahorro_cuotas").val("{{ tiposahorro.plazo  }}");#}
                $("#modulos_personasbundle_ahorro_tasaInteres").val("{{ tiposahorro.tasaInteres*100  }}");
//                $("#modulos_personasbundle_ahorro_cuotas").attr("readonly",true);
                $("#modulos_personasbundle_ahorro_tasaInteres").attr("readonly",true);
                //$("#modulos_personasbundle_ahorro_valorAhorrar").attr("readonly",true);
               // $("#modulos_personasbundle_ahorro_tipoAhorro").attr("disabled",true);
                montominimo = "{{ tiposahorro.montominimo }}";
                montomaximo = "{{ tiposahorro.montomaximo }}";

            }
            {% endfor %}

            $("#modulos_personasbundle_ahorro_tipoAhorro").change(function(){
                var valorahorroTipo= $("#modulos_personasbundle_ahorro_tipoAhorro").val();
                {% for tiposahorro in tiposahorros %}
                var valor = "AHORRO INDIVIDUAL";
                var objValor = "{{ tiposahorro.id }}";
                if(valorahorroTipo == objValor){
                    {#$("#modulos_personasbundle_ahorro_cuotas").val("{{ tiposahorro.plazo  }}");#}
                    $("#modulos_personasbundle_ahorro_tasaInteres").val("{{ tiposahorro.tasaInteres  }}");
//                    $("#modulos_personasbundle_ahorro_cuotas").attr("readonly",true);
                    $("#modulos_personasbundle_ahorro_tasaInteres").attr("readonly",true);
                    montominimo = "{{ tiposahorro.montominimo }}";
                    montomaximo = "{{ tiposahorro.montomaximo }}";

                    var valor = $("#modulos_personasbundle_ahorro_valorAhorrar").val();

//                    var cuotas = $("#modulos_personasbundle_ahorro_cuotas").val();
                    var tasa = $("#modulos_personasbundle_ahorro_tasaInteres").val();
                    if((parseInt(valor)>=parseInt(montominimo)) && (parseInt(valor)<=parseInt(montomaximo))){

                        $("#Guardar").attr('disabled',false);
                    }
                    else{
                        $("#Guardar").attr('disabled',true);
                    }


                }

                if(valorahorroTipo != 2){
                    $("#modulos_personasbundle_ahorro_fechafinal").attr("readonly",true);
                }
                {% endfor %}



            });

            $("#Guardar").attr('disabled',true);

            $("#modulos_personasbundle_ahorro_valorAhorrar").on('keyup', function(){
                var valor = $(this).val();

//                var cuotas = $("#modulos_personasbundle_ahorro_cuotas").val();
                var tasa = $("#modulos_personasbundle_ahorro_tasaInteres").val();
                if((parseInt(valor)>=parseInt(montominimo)) && (parseInt(valor)<=parseInt(montomaximo))){

                    $("#Guardar").attr('disabled',false);
                    $("#valorsolicitado").hide();
                }
                else{
                    $("#Guardar").attr('disabled',true);
                    $("#valorsolicitado").html('<span id="" class="label label-warning">El valor solicitado debe ser mayor que '+montominimo+' y menor que '+montomaximo+'</span>')
                    $("#valorsolicitado").show();
                }


            });
//             alert(montominimo + " " + montomaximo + " " + valor);
            var valor = $("#modulos_personasbundle_ahorro_valorAhorrar").val();
            if((parseInt(valor)>=parseInt(montominimo)) && (parseInt(valor)<=parseInt(montomaximo))){

                $("#Guardar").attr('disabled',false);
            }
            else{
                $("#Guardar").attr('disabled',true);
            }

            var valor = $(this).val();

            //var cuotas = $("#modulos_personasbundle_ahorro_numeroDePagos").val();
            //var tasa = $("#modulos_personasbundle_ahorro_tasaInteres").val();
            var tasa = $("#modulos_personasbundle_ahorro_tasaInteres").val();
            var tasaPeriodica=tasa/(12*100);
            var valorPeriodo = $("#modulos_personasbundle_ahorro_frecuenciadepago").val();
            switch (valorPeriodo ){
                //SEMANAL MENSUAL SEMESTRAL TRIMESTRAL DIARIA ANUAL
                case "1" :{//case 'SEMANAL':{
                    tasaPeriodica=tasa/52;
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "2" :{//case 'MENSUAL':{
                    tasaPeriodica=tasa/(12*100);
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "3" :{//case 'SEMESTRAL':{
                    tasaPeriodica=tasa/2;
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "4" :{//case 'TRIMESTRAL':{
                    tasaPeriodica=tasa/4;
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "5" :{//case 'DIARIA':{
                    tasaPeriodica=tasa/360;
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "6" :{//case 'ANUAL':{
                    tasaPeriodica=tasa/1;
                    $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                    $("#tasamensual").show();
                }break;
                case "" :{
                    $("#tasamensual").hide();
                }break;

            }

            $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
            $("#tasamensual").show();
            $("#modulos_personasbundle_ahorro_frecuenciadepago").change(function() {
                var valorPeriodo = $("#modulos_personasbundle_ahorro_frecuenciadepago").val();
                switch (valorPeriodo ){
                    //SEMANAL MENSUAL SEMESTRAL TRIMESTRAL DIARIA ANUAL
                    case "1" :{//case 'SEMANAL':{
                        tasaPeriodica=tasa/52;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "2" :{//case 'MENSUAL':{
                        tasaPeriodica=tasa/12;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "3" :{//case 'SEMESTRAL':{
                        tasaPeriodica=tasa/2;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "4" :{//case 'TRIMESTRAL':{
                        tasaPeriodica=tasa/4;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "5" :{//case 'DIARIA':{
                        tasaPeriodica=tasa/360;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "6" :{//case 'ANUAL':{
                        tasaPeriodica=tasa/1;
                        $("#tasamensual").html('<span id="" class="label label-info">La tasa equivalente asociada al período es del '+tasaPeriodica.toFixed(4)+' %</span>')
                        $("#tasamensual").show();
                    }break;
                    case "" :{
                        $("#tasamensual").hide();
                    }break;

                }

            });



        });


    </script>

    <style>
        .tabla_center_align{
            text-align: center !important;
        }
        .tabla_right_align{
            text-align: right !important;
        }
        .tabla_left_align{
            text-align: left !important;
        }
    </style>

    <form action="{{ path('ahorro_update',{'id':entity.id}) }}" class="" method="post" {{ form_enctype(edit_form) }}>
        {{ form_start(edit_form) }}
        {{ form_errors(edit_form) }}

        <div>
            <div class="oe_view_manager oe_view_manager_current" data-view-type="form">
                {% for flashMessage in app.session.flashbag.get('notice') %}
                    <div class="alert alert-success">
                        <strong>{{ flashMessage }}</strong>
                    </div>
                {% endfor %}
                {% for flashMessage in app.session.flashbag.get('error') %}
                    <div class="alert alert-danger">
                        <strong>{{ flashMessage }}</strong>
                    </div>
                {% endfor %}
                <table class="oe_view_manager_header">
                    <tbody><tr class="oe_header_row oe_header_row_top">
                        <td colspan="2">
                            <h2 class="oe_view_title">
                                <span class="oe_view_title_text oe_breadcrumb_title"><a data-id="breadcrumb_3" class="oe_breadcrumb_item" href="{{ path('ahorro')}}">Listado de los ahorros</a> <span class="oe_fade">/</span> <span class="oe_breadcrumb_item">Modificar</span></span>
                            </h2>
                        </td>

                    </tr>

                    <tr class="oe_header_row">
                        <td>
                            <div class="oe_view_manager_buttons">
                                <div class="oe_form_buttons">
                                    <span class="oe_form_buttons_edit" style="display: inline;">

                                        {% if  entity.estadoAhorro != 'APROBADO'%}
                                            <a  href="{{ path('ahorro') }}" class="oe_button oe_form_button_cancel" accesskey="C">Retornar</a>
                                        {% else %}
                                            <button id="Guardar" type="submit" accesskey="S"> <a id="Guardar" class="btn btn-warning btn-sm" >Aprobar</a></button>
                                            <a  href="{{ path('ahorro') }}" class="oe_button oe_form_button_cancel" accesskey="C">Cancelar</a>
                                        {% endif %}

                                            <label  href="{{ path('persona') }}" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                            <a type="button" id="carteraahorro"  class="oe_button oe_list_add" href="#">Historial Ahorros</a>
                                    </span>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <div class="oe_view_manager_wrapper">
                    <div>

                        <div class="oe_view_manager_view_form" style="display: block;">
                            <div class="oe_formview oe_view oe_form_editable" style="opacity: 1;">

                                <div class="oe_form_container">
                                    <div class="oe_form">
                                        <div class="">
                                            <header>
                                                <ul class="oe_form_field_status oe_form_status" data-original-title="" title="">

                                                    <li data-id="draft" class="oe_active">
                                                        <span class="label">&nbsp;</span>
                                                        <span class="arrow"><span></span></span>
                                                    </li>

                                                    <li data-id="open" class="">
                                                        <span class="label">&nbsp;</span>
                                                        <span class="arrow"><span></span></span>
                                                    </li>

                                                    <li data-id="paid" class="">
                                                        <span class="label">&nbsp;</span>
                                                        <span class="arrow"><span></span></span>
                                                    </li>


                                                </ul>
                                                <div class="oe_clear"></div>
                                            </header>

                                            <div class="oe_form_sheetbg">
                                                <div class="oe_form_sheet oe_form_sheet_width">
                                                    <h1>
                                                        <label class="oe_form_label oe_align_right"> Datos del Ahorro </label>
                                                    </h1>

                                                    <table cellspacing="0" cellpadding="0" border="0" class="oe_form_group ">
                                                        <tbody>
                                                        <tr class="oe_form_group_row">
                                                            <td width="100%" class="oe_form_group_cell" colspan="1">
                                                                <table cellspacing="0" cellpadding="0" border="0" class="oe_form_group ">
                                                                    <tbody>
                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Persona
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{ form_widget(edit_form.persona,{'attr':{'title':'Seleccione la persona'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Número
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{  form_widget(edit_form.id,{'attr':{'title':'Número asignado al ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Tipo Ahorro
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{ form_widget(edit_form.tipoAhorro,{'attr':{'title':'Seleccione el tipo de ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Valor a Ahorrar
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{ form_widget(edit_form.valorAhorrar,{'attr':{'title':'Introduzca el valor total a ahorrar, debe ser menor al monto máximo y mayor que el monto mínimo del tipo de ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                      <span id="valorsolicitado"> </span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <!--<tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Cuota de Ahorrar
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {##}{ form_widget(edit_form.valorEnCaja,{'attr':{'title':'Cuota o Total del valor a ahorrar'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>-->

                                                                    <!--<tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Cuotas
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {##}{ form_widget(edit_form.cuotas,{'attr':{'title':'Cuota asignada del tipo de ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>-->

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Tasa de Interés Anual
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{ form_widget(edit_form.tasaInteres,{'attr':{'title':'Tasa de interes asignada del tipo de ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                                 <span id="tasamensual"> </span>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <!--<tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Frecuencia de pago
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div>
                                                                                      {{ form_widget(edit_form.frecuenciadepago,{'attr':{'title':'Seleccione la frecuencia de depósitos'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>-->

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Fecha de Solicitud
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div class="input-group">
                                                                                      {{ form_widget(edit_form.fechaSolicitud,{'attr':{'title':'Seleccione la fecha de solicitud'} }) }}
                                                                                      <span class="input-group-addon"> <i class="glyphicon glyphicon-calendar"></i></span>
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Fecha Final
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div class="input-group">
                                                                                      {{ form_widget(edit_form.fechafinal,{'attr':{'title':'Seleccione la fecha de finalización de Ahorro a Plazo Fijo'} }) }}
                                                                                      <span class="input-group-addon"> <i class="glyphicon glyphicon-calendar"></i></span>
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    <tr class="oe_form_group_row">
                                                                        <td width="1%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                                                            <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                                                                Estado Ahorro
                                                                            </label>
                                                                        </td>

                                                                        <td width="99%" class="oe_form_group_cell" colspan="1">
                                                                             <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                                  <div >
                                                                                      {{ form_widget(edit_form.estadoAhorro,{'attr':{'title':'Seleccione el estado del ahorro'} }) }}
                                                                                      <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                  </div>
                                                                             </span>
                                                                        </td>
                                                                    </tr>

                                                                    </tbody>
                                                                </table>
                                                            </td>

                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                    <hr style="width: 96%;padding: 1px;border-color: #7C7BAD">

                                                    <div>
                                                        <div class="oe_view_manager oe_view_manager_current" data-view-type="form">

                                                            {% set cantPagada=0 %}
                                                            {% set intereses=0 %}
                                                            {% for pagorealizado in pagosrealizados %}
                                                                {% set cantPagada = cantPagada + (pagorealizado.cuota * pagorealizado.tipo) %}
                                                                {% set intereses = intereses + (pagorealizado.interes) %}
                                                            {% endfor %}
                                                            <div class="oe_view_manager_wrapper">
                                                                <div>
                                                                    <h1>
                                                                        <label class="oe_form_label oe_align_right"> Datos
                                                                            del Ahorro de {{ entity.persona is null ? "" : (entity.persona.nombre is null ? " " : entity.persona.nombre) }}&nbsp;{{ entity.persona is null ? "" : (entity.persona.primerApellido is null ? " " : entity.persona.primerApellido) }}&nbsp;{{ entity.persona is null ? "" : (entity.persona.segundoApellido is null ? " " : entity.persona.segundoApellido)}}&nbsp;</label>
                                                                    </h1>
                                                                    <br>

                                                                    <table >
                                                                        <thead>
                                                                        <th width="25%" class="tabla_right_align"></th>
                                                                        <th width="25%" class="tabla_left_align"></th>
                                                                        <th width="25%" class="tabla_right_align"></th>
                                                                        <th width="25%" class="tabla_left_align"></th>


                                                                        </thead>
                                                                        <tbody>
                                                                        <tr class="oe_header_row oe_header_row_top">
                                                                            <td class="tabla_right_align" style="padding-right: 20px">
                                                                                <h3>
                                                                                    Valor Autorizado:
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_left_align">
                                                                                <h3>
                                                                                    $ {{ (entity.valorAhorrar)| number_format(2, '.' , ',' ) }}
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_right_align" style="padding-right: 20px">
                                                                                <h3>
                                                                                    Valor en Caja:
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_left_align">
                                                                                <h3>
                                                                                    $ {{ ((cantPagada))| number_format(2, '.' , ',' ) }}
                                                                                    {#$ {{ entity.valorEnCaja|  round(2, 'ceil'))| number_format(2, '.' , ',' ) }}#}
                                                                                    {#$ {{ (intereses + cantPagada) |  round(2, 'ceil'))| number_format(2, '.' , ',' ) }}#}
                                                                                </h3>
                                                                            </td>
                                                                        </tr>
                                                                        <tr class="oe_header_row oe_header_row_top">

                                                                            <td class="tabla_right_align" style="padding-right: 20px">
                                                                                <h3>
                                                                                    Valor sin Interés:
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_left_align">
                                                                                <h3>
                                                                                    $ {{ (cantPagada )| number_format(2, '.' , ',' ) }}
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_right_align" style="padding-right: 20px">
                                                                                <h3>
                                                                                    Interés:
                                                                                </h3>
                                                                            </td>
                                                                            <td class="tabla_left_align">
                                                                                <h3>
                                                                                    $ {{ (intereses)| number_format(2, '.' , ',' )}}
                                                                                </h3>
                                                                            </td>
                                                                        </tr>
                                                                        </tbody>
                                                                    </table>


                                                                    <hr style="width: 96%;padding: 1px;border-color: #7C7BAD">
                                                                    <h2>Tabla de movimientos realizados</h2>
                                                                    <table class="table">
                                                                        <thead>
                                                                        <th width="150px" class="tabla_center_align">Fecha</th>
                                                                        <th width="150px" class="tabla_center_align">Operación</th>
                                                                        <th width="250px" class="tabla_center_align">Valor cuota</th>
                                                                        <th width="250px" class="tabla_center_align">Interés</th>
                                                                        <th width="250px" class="tabla_center_align">Valor Acumulado</th>

                                                                        </thead>
                                                                        <tbody>
                                                                        {% for pagorealizado in pagosrealizados %}
                                                                            <tr>
                                                                                <td width=""
                                                                                    class="tabla_center_align"> {{ pagorealizado.fechaDeEntrada | date('d/m/Y') }}</td>
                                                                                <td width=""
                                                                                    class="tabla_left_align">&nbsp;&nbsp; {{ pagorealizado.tipo == 1 ? "Depósito" : "Retiro" }}</td>
                                                                                <td width="" class="tabla_right_align">
                                                                                    $ {{ (pagorealizado.cuota  )| number_format(2, '.' , ',' ) }}&nbsp;&nbsp;</td>
                                                                                <td width="" class="tabla_right_align">  $ {{ (pagorealizado.interes)| number_format(2, '.' , ',' ) }} &nbsp;&nbsp;</td>
                                                                                <td width="" class="tabla_right_align">  $ {{ (pagorealizado.cuotaAcumulada)| number_format(2, '.' , ',' )}} &nbsp;&nbsp;</td>
                                                                                {#{$ {{ (pagorealizado.interes   |  round(2, 'ceil'))| number_format(2, '.' , ',' ) }}&nbsp;&nbsp;</td>}#}
                                                                            </tr>
                                                                        {% endfor %}
                                                                        <tr>
                                                                            <td width=""
                                                                                class="tabla_center_align"> </td>
                                                                            <td width=""
                                                                                class="tabla_left_align" style="font-weight: bold !important; font-size: 14px !important;">&nbsp;&nbsp; Totales</td>
                                                                            <td width="" class="tabla_right_align" style="font-weight: bold !important; font-size: 14px !important;">
                                                                                $ {{ (cantPagada   )| number_format(2, '.' , ',' ) }}&nbsp;&nbsp;</td>
                                                                            <td width="" class="tabla_right_align" style="font-weight: bold !important; font-size: 14px !important;">
                                                                                $ {{ (intereses )| number_format(2, '.' , ',' )}}&nbsp;&nbsp;</td>
                                                                            <td width="" class="tabla_right_align">  &nbsp;&nbsp;</td>
                                                                            {#$ {{ (intereses   |  round(2, 'ceil'))| number_format(2, '.' , ',' ) }}&nbsp;&nbsp;</td>#}
                                                                        </tr>
                                                                        </tbody>
                                                                    </table>

                                                                    {#<hr style="width: 96%;padding: 1px;border-color: #7C7BAD">#}
                                                                    {#<h2>Tabla de depósitos realizados</h2>#}
                                                                    {#<table border="1">#}
                                                                        {#<thead>#}
                                                                        {#<th width="150px" class="tabla_center_align">Fecha De Pago</th>#}
                                                                        {#<th width="250px" class="tabla_center_align">Valor cuota</th>#}
                                                                        {#</thead>#}
                                                                        {#<tbody>#}
                                                                        {#{% for pagorealizado in pagosrealizados %}#}
                                                                            {#<tr>#}
                                                                                {#<td width=""#}
                                                                                    {#class="tabla_center_align"> {{ pagorealizado.fechaDePago | date('d/m/Y') }}</td>#}
                                                                                {#<td width="" class="tabla_right_align tabla_center_align">#}
                                                                                    {#$ {{ (pagorealizado.valorIngresado   |  round(2, 'ceil'))| number_format(2, '.' , ',' ) }}</td>#}
                                                                            {#</tr>#}
                                                                        {#{% endfor %}#}
                                                                        {#</tbody>#}
                                                                    {#</table>#}
                                                                    <br><br><br><br><br><br><br><br><br>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div></div>

                                        <div class="oe_view_manager_view_calendar" style="display: none;"></div>

                                        <div class="oe_view_manager_view_graph" style="display: none;"></div>

                                        <ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-6" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-7" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-8" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-9" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-10" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-11" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-12" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-13" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-14" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-15" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-16" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all openerp" id="ui-id-17" tabindex="0" style="z-index: 1; display: none;"></ul></div>
                                </div>
                            </div>
                        </div></div></div></div></div>

                    {{ form_row(edit_form._token) }}
    </form>


{% endblock %}


