{% extends '::fronted5.html.twig' %}
{% block title %}Resumen de Aportes Socios{% endblock %}
{% block encabezado %}Resumen de Aportes Socios{% endblock %}

{% block contenedor %}
    <script>
        $(document).ready(function () {
            $(document).on("click","#aportes",function(){

                var mes = $('#mes').val();
                var ano = $('#ano').val();
                if( mes==0 || ano==""){
                    BootstrapDialog.show({
                        type: BootstrapDialog.TYPE_DEFAULT,
                        size: BootstrapDialog.SIZE_SMALL,
                        title: 'Error al visualizar el resumen',
                        message: 'Debe seleccionar el mes y el año.'
                    });
                }else{
                    $('#aportes').attr("href","{{ path('resumenAportes',{'mes':'','ano':''}) }}" + '/' + mes + '/'+ ano);
                }
            });

            $(document).on("click","#export",function(){

                var mes = $('#mes').val();
                var ano = $('#ano').val();
                if( mes==0 || ano==""){
                    BootstrapDialog.show({
                        type: BootstrapDialog.TYPE_DEFAULT,
                        size: BootstrapDialog.SIZE_SMALL,
                        title: 'Error al visualizar el resumen',
                        message: 'Debe seleccionar el mes y el año.'
                    });
                }else{
                    $('#export').attr("href","{{ path('imprimirResumenAportes',{'mes':'','ano':''}) }}" + '/' + mes + '/'+ ano);
                }
            });

            $("#verresaportesocios").addClass("active");
            $("#Contabilidad").addClass("active");
        });

    </script>
    <style>
        .tabla_center_align {
            text-align: center !important;
        }
        .tabla_right_align {
            text-align: right !important;
        }
        .tabla_left_align {
            text-align: left !important;
        }
    </style>

    <div class="oe_view_manager oe_view_manager_current" data-view-type="list">
        <div class="oe_view_manager_header">
            {% for flashMessage in app.session.flashbag.get('notice') %}
                <div class="alert alert-success">
                    <strong>{{ flashMessage }}</strong>
                </div>
            {% endfor %}
            {% for flashMessage in app.session.flashbag.get('error') %}
                <div class="alert alert-danger">
                    <strong>{{ flashMessage }}</strong>
                </div>
            {% endfor %}
            <table class="oe_view_manager_header">
                <colgroup>
                    <col width="20%">
                    <col width="35%">
                    <col width="15%">
                    <col width="30%">
                </colgroup>
                <tbody>
                <tr class="oe_header_row oe_header_row_top">
                    <td colspan="2">


                        <h2 class="oe_view_title">
                            <span class="oe_view_title_text oe_breadcrumb_title">
                                <span class="oe_breadcrumb_item">Resumen de Aportes Socios</span>
                            </span>
                        </h2>
                    </td>
                    <td colspan="2">


                    </td>
                </tr>
                </tbody>
            </table>

        </div>
        <br>
        <table cellspacing="0" cellpadding="0" border="0" class="oe_form_group ">
            <tbody>
            <tr class="oe_form_group_row">
                <td width="90%" class="oe_form_group_cell" colspan="1">
                    <table cellspacing="0" cellpadding="0" border="0" class="oe_form_group ">
                        <tbody>
                        <tr class="oe_form_group_row">
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">


                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    &nbsp;&nbsp;

                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    Año

                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">


                                </label>
                            </td>
                            <td width="30%" class="oe_form_group_cell" colspan="1">
                                                                            <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                            <div>
                                                                                <div>
                                                                                    <select  id="ano" name="ano" >
                                                                                        <option value="2028">2028</option>
                                                                                        <option value="2027">2027</option>
                                                                                        <option value="2026">2026</option>
                                                                                        <option value="2025">2025</option>
                                                                                        <option value="2024">2024</option>
                                                                                        <option value="2023">2023</option>
                                                                                        <option value="2022">2022</option>
                                                                                        <option value="2021">2021</option>
                                                                                        <option value="2020">2020</option>
                                                                                        <option value="2019">2019</option>
                                                                                        <option value="2018">2018</option>
                                                                                        <option value="2017">2017</option>
                                                                                        <option value="2016" selected>2016</option>
                                                                                        <option value="2015">2015</option>
                                                                                        <option value="2014">2014</option>
                                                                                        <option value="2013">2013</option>
                                                                                        <option value="2012">2012</option>
                                                                                        <option value="2011">2011</option>
                                                                                        <option value="2010">2010</option>
                                                                                        <option value="2009">2009</option>
                                                                                        <option value="2008">2008</option>
                                                                                        <option value="2007">2007</option>
                                                                                        <option value="2006">2006</option>
                                                                                        <option value="2005">2005</option>
                                                                                        <option value="2004">2004</option>
                                                                                        <option value="2003">2003</option>
                                                                                        <option value="2002">2002</option>
                                                                                        <option value="2001">2001</option>
                                                                                        <option value="2000">2000</option>

                                                                                    </select>
                                                                                    <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                                </div>

                                                                                <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                            </div>
                                                                            </span>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">


                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    Mes
                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    &nbsp;
                                </label>
                            </td>
                            <td width="30%" class="oe_form_group_cell" colspan="1">
                                                                            <span class="oe_form_field oe_form_field_many2one oe_form_field_with_button oe_form_required">
                                                                            <div>
                                                                                <select  id="mes" name="mes" >

                                                                                    <option value="1" selected> Enero</option>
                                                                                    <option value="2"> Febrero</option>
                                                                                    <option value="3"> Marzo</option>
                                                                                    <option value="4"> Abril</option>
                                                                                    <option value="5"> Mayo</option>
                                                                                    <option value="6"> Junio</option>
                                                                                    <option value="7"> Julio</option>
                                                                                    <option value="8"> Agosto</option>
                                                                                    <option value="9"> Septiembre</option>
                                                                                    <option value="10"> Octubre</option>
                                                                                    <option value="11"> Noviembre</option>
                                                                                    <option value="12"> Diciembre</option>
                                                                                </select>
                                                                                <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                                                                            </div>
                                                                            </span>
                            </td>

                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    &nbsp;

                                </label>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    &nbsp;

                                </label>
                            </td>
                            <td width="30%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <a id="aportes" type="button" class="oe_button oe_list_add" href="#">
                                Mostrar
                                </a>
                            </td>
                            <td width="10%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <label class=" oe_form_label oe_align_right" for="oe-field-input-5">
                                    &nbsp;

                                </label>
                            </td>
                            <td width="30%" class="oe_form_group_cell oe_form_group_cell_label" colspan="1">
                                <span class="oe_form_buttons_edit" style="display: inline;">
                                <a type="button" id="export" class="oe_button oe_list_add oe_highlight  ">
                                Exportar
                                </a>
                                    </span>
                            </td>


                        </tr>
                        </tbody>

                    </table>

                </td>
            </tr>
            </tbody>
        </table>
        <hr style="width: 96%;padding: 1px;border-color: #7C7BAD">
        <h3>&nbsp;&nbsp;{{ fechaLabel }}</h3>
        <table border="1" style="margin: 5px">
            <!--<thead>-->
            <tbody>

            <tr>
            <td width="10%" class="tabla_center_align" style= "background-color: #F0F0F0"><b>No</b></td>
            <td width="20%" class="tabla_center_align" style= "background-color: #F0F0F0"><b>Persona</b></td>
            {% for mes in meses %}
                <th  class="tabla_center_align" style= "background-color: #F0F0F0"><b>&nbsp;&nbsp;{{ mesesTexto[mes] }}&nbsp;</b>&nbsp;</th>
            {% endfor %}
            <td width="100px" class="tabla_center_align" style= "background-color: #F0F0F0"><b>&nbsp;&nbsp;&nbsp;&nbsp;Total&nbsp;&nbsp;&nbsp;</b>&nbsp;</td>
                </tr>
            <!--</thead>
            <tbody>-->
            {% set cont=1 %}
            {% for resumenAporte in aportes %}
                <tr>
                    <td width="10%"
                        class="tabla_center_align"> {{ cont }}</td>
                    <td  width="20%"
                        class="tabla_left_align">&nbsp;{{ resumenAporte['persona']}}&nbsp;</td>
                    {% for mes in meses %}
                    {% if (resumenAporte['meses'][mes]-resumenAporte['retiro'][mes])=='0' %}
                        <td  class="tabla_right_align"></td>
                    {% else %}
                        <td  class="tabla_right_align">&nbsp;$&nbsp;{{ (resumenAporte['meses'][mes]-resumenAporte['retiro'][mes] )|number_format(2, '.' , ',' )}}&nbsp;</td>
                    {% endif %}
                    {% endfor %}
                    <td width=""
                        class="tabla_right_align">&nbsp;$&nbsp;{{ resumenAporte['total'] |number_format(2, '.' , ',' )}}&nbsp;&nbsp;</td>
                    {% set cont=cont + 1 %}
                </tr>
            {% endfor %}
            {% set total=0  %}
            <tr>
                <td width="10%"
                    class="tabla_center_align"> </td>
                <td width="10%"
                    class="tabla_center_align" style="font-weight: bold"> Total </td>
                {% for mes in meses %}

                    {% if   mesesTotales[mes]>= "0"%}
                        <td width="" class="tabla_right_align" style='color: green;'>
                            <b>&nbsp;$&nbsp;{{ mesesTotales[mes]|number_format(2, '.' , ',' ) }}&nbsp; </b></td>
                    {% else%}
                        <td width="" class="tabla_right_align" style='color: red;'>
                            <b>&nbsp;$&nbsp;{{ mesesTotales[mes]|number_format(2, '.' , ',' ) }}&nbsp; </b></td>
                    {% endif %}

                    {% set total = total + mesesTotales[mes] %}
                {% endfor %}

                {% if   total>= "0"%}
                    <td width="" class="tabla_right_align" style='color: green;'>
                        <b>&nbsp;$&nbsp;{{ total |number_format(2, '.' , ',' ) }}&nbsp; </b></td>
                {% else%}
                    <td width="" class="tabla_right_align" style='color: red;'>
                        <b>&nbsp;$&nbsp;{{ total |number_format(2, '.' , ',' ) }}&nbsp; </b></td>
                {% endif %}
            </tr>
            </tbody>
        </table>

    </div>

{% endblock %}
    
